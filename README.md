# å°çº¢ä¹¦è‡ªåŠ¨åŒ–å·¥å…·é›†

è¿™æ˜¯ä¸€ä¸ªç”¨äºå°çº¢ä¹¦å†…å®¹å‘å¸ƒå’Œè¯„è®ºç®¡ç†çš„è‡ªåŠ¨åŒ–å·¥å…·é›†åˆã€‚

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ xiaohongshu-publish/     # å‘å¸ƒç›¸å…³å·¥å…·
â”‚   â”œâ”€â”€ SKILL.md            # å‘å¸ƒæŠ€èƒ½è¯´æ˜æ–‡æ¡£
â”‚   â””â”€â”€ publish_long_text.py # é•¿æ–‡å‘å¸ƒè„šæœ¬
â”‚
â””â”€â”€ xiaohongshu-reply/       # è¯„è®ºå›å¤å·¥å…·
    â”œâ”€â”€ SKILL.md            # å›å¤æŠ€èƒ½è¯´æ˜æ–‡æ¡£
    â”œâ”€â”€ check_comments.py   # ä¸»è¦çš„è¯„è®ºæ£€æŸ¥å’Œå›å¤å·¥å…·
    â”œâ”€â”€ reply_fixed.py      # ä¿®å¤ç‰ˆå›å¤å·¥å…·ï¼ˆå¤‡ç”¨ï¼‰
    â”œâ”€â”€ generate_replies.py # å›å¤æ¨¡æ¿ç”Ÿæˆå™¨
    â””â”€â”€ fetch_latest.py     # æœ€æ–°è¯„è®ºè·å–å·¥å…·
```

## åŠŸèƒ½è¯´æ˜

### ğŸ“ å‘å¸ƒå·¥å…· (xiaohongshu-publish)

- **publish_long_text.py**: è‡ªåŠ¨å‘å¸ƒå°çº¢ä¹¦é•¿æ–‡å†…å®¹
  - æ”¯æŒæ ‡é¢˜å’Œæ­£æ–‡å†…å®¹è¾“å…¥
  - è‡ªåŠ¨æ’ç‰ˆå’Œå‘å¸ƒ
  - å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ

### ğŸ’¬ è¯„è®ºç®¡ç†å·¥å…· (xiaohongshu-reply)

- **check_comments.py**: ä¸»è¦çš„è¯„è®ºç®¡ç†å·¥å…·
  - è‡ªåŠ¨è·å–æœ€æ–°è¯„è®º
  - æ‰¹é‡å›å¤æŒ‡å®šè¯„è®º
  - æ”¯æŒè‡ªå®šä¹‰å›å¤æ¨¡æ¿

- **reply_fixed.py**: å¤‡ç”¨çš„è¯„è®ºå›å¤å·¥å…·
  - æä¾›é¢å¤–çš„å›å¤åŠŸèƒ½
  - åŒ…å«é”™è¯¯å¤„ç†å’Œè°ƒè¯•åŠŸèƒ½

- **generate_replies.py**: å›å¤æ¨¡æ¿ç”Ÿæˆå™¨
  - ç”Ÿæˆæ ‡å‡†åŒ–çš„å›å¤æ¨¡æ¿
  - ä¾¿äºæ‰¹é‡å›å¤ç®¡ç†

- **fetch_latest.py**: è¯„è®ºè·å–å·¥å…·
  - ä¸“é—¨ç”¨äºè·å–æœ€æ–°è¯„è®º
  - ä¿å­˜è¯„è®ºæ•°æ®å’Œæˆªå›¾

## ç¯å¢ƒé…ç½®

### å¿…éœ€æ–‡ä»¶

1. **Cookieé…ç½®**: `~/.openclaw/secrets/xiaohongshu.json`
   ```json
   {
     "a1": "your_a1_cookie",
     "web_session": "your_web_session",
     "webId": "your_webId",
     "websectiga": "your_websectiga"
   }
   ```

2. **Stealthè„šæœ¬**: `stealth.min.js` âœ… **å·²å†…ç½®**
   - ç”¨äºç»•è¿‡åçˆ¬è™«æ£€æµ‹
   - æ¥æº: [puppeteer-extra](https://github.com/berstend/puppeteer-extra) (MIT License)
   - é¡¹ç›®ä¸­å·²åŒ…å«ï¼Œæ— éœ€é¢å¤–é…ç½®

### ä¾èµ–å®‰è£…

```bash
pip install playwright
playwright install chromium
```

## ä½¿ç”¨æ–¹æ³•

### å‘å¸ƒé•¿æ–‡

```bash
# åŸºæœ¬ä½¿ç”¨
python xiaohongshu-publish/publish_long_text.py --title "æ–‡ç« æ ‡é¢˜" --content "æ–‡ç« å†…å®¹"

# æ˜¾ç¤ºæµè§ˆå™¨çª—å£ï¼ˆè°ƒè¯•ç”¨ï¼‰
python xiaohongshu-publish/publish_long_text.py --title "æ ‡é¢˜" --content "å†…å®¹" --visible
```

### ç®¡ç†è¯„è®º

```bash
# æ£€æŸ¥å¹¶å›å¤è¯„è®º
python xiaohongshu-reply/check_comments.py

# è·å–æœ€æ–°è¯„è®º
python xiaohongshu-reply/fetch_latest.py

# ç”Ÿæˆå›å¤æ¨¡æ¿
python xiaohongshu-reply/generate_replies.py
```

## æ³¨æ„äº‹é¡¹

1. **Cookieå®‰å…¨**: è¯·å¦¥å–„ä¿ç®¡cookieæ–‡ä»¶ï¼Œä¸è¦æ³„éœ²ç»™ä»–äºº
2. **ä½¿ç”¨é¢‘ç‡**: å»ºè®®åˆç†æ§åˆ¶ä½¿ç”¨é¢‘ç‡ï¼Œé¿å…è¢«å¹³å°æ£€æµ‹
3. **å†…å®¹åˆè§„**: ç¡®ä¿å‘å¸ƒå’Œå›å¤çš„å†…å®¹ç¬¦åˆå¹³å°è§„èŒƒ
4. **è·¯å¾„é…ç½®**: é¦–æ¬¡ä½¿ç”¨å‰è¯·ç¡®ä¿æ‰€æœ‰å¿…éœ€æ–‡ä»¶è·¯å¾„æ­£ç¡®é…ç½®

## æŠ€æœ¯ç‰¹æ€§

- åŸºäº Playwright çš„è‡ªåŠ¨åŒ–æ“ä½œ
- æ”¯æŒæ— å¤´æ¨¡å¼å’Œå¯è§†åŒ–è°ƒè¯•
- é€šç”¨è·¯å¾„é…ç½®ï¼Œé€‚é…ä¸åŒç”¨æˆ·ç¯å¢ƒ
- æ¨¡æ¿åŒ–å›å¤ï¼Œä¾¿äºæ‰¹é‡ç®¡ç†
- å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## ç¬¬ä¸‰æ–¹ç»„ä»¶è¯´æ˜

### stealth.min.js

é¡¹ç›®ä¸­åŒ…å«çš„ `stealth.min.js` æ–‡ä»¶ç”¨äºæµè§ˆå™¨åçˆ¬è™«æ£€æµ‹ç»•è¿‡ï¼š

- **æ¥æº**: [berstend/puppeteer-extra](https://github.com/berstend/puppeteer-extra)
- **ç”Ÿæˆå·¥å…·**: `extract-stealth-evasions`
- **è®¸å¯è¯**: MIT License
- **ç”Ÿæˆæ—¶é—´**: 2026-02-02
- **å¤§å°**: ~200KB (å‹ç¼©ç‰ˆ)

**åŠŸèƒ½è¯´æ˜**:
- éšè— `navigator.webdriver` æ ‡è¯†
- æ¨¡æ‹Ÿå®Œæ•´çš„Chromeæµè§ˆå™¨ç¯å¢ƒ
- è¡¥å…¨æ’ä»¶å’ŒMIMEç±»å‹ä¿¡æ¯
- ä¼ªè£…ç¡¬ä»¶å’ŒWebGLä¿¡æ¯
- ä¿®è¡¥æƒé™å’Œé€šçŸ¥APIè¡Œä¸º

è¯¦ç»†ä¿¡æ¯è¯·å‚é˜…: [`STEALTH_INFO.md`](./STEALTH_INFO.md)

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³å¹³å°çš„ä½¿ç”¨æ¡æ¬¾ã€‚

**ç¬¬ä¸‰æ–¹ç»„ä»¶è®¸å¯**:
- `stealth.min.js`: MIT License (æ¥è‡ª puppeteer-extra é¡¹ç›®)
